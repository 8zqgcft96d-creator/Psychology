<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>心理測驗全螢幕卡片</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    font-family: Arial, sans-serif; background: #f0f0f0;
    overflow: hidden;
}
.card {
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    box-sizing: border-box;
    text-align: center;
    width: 100vw;
    height: 100vh;
    padding: 2vw;
    font-size: 5vw; /* 文字大小跟螢幕寬度 */
}
h3 {
    margin-bottom: 3vh;
}
button.option {
    display: block;
    margin: 1vh auto;
    padding: 2vh 0;
    width: 90%; /* 佔螢幕寬度 */
    font-size: 4vw; /* 按鈕文字跟螢幕比例 */
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #e0e0e0;
    transition: 0.2s;
}
button.option:hover { background: #d0d0d0; }
#result canvas { max-width: 90%; max-height: 40vh; margin-top: 3vh; }
#analysisText { margin-top: 2vh; font-size: 4vw; }
</style>
</head>
<body>

<div id="quiz" class="card"></div>
<div id="result" class="card" style="display:none;">
    <h3 id="dominantAnimal"></h3>
    <p id="dominantDesc"></p>
    <canvas id="radarChart"></canvas>
    <div id="analysisText"></div>
</div>

<script>
// 題目與選項
const questions = [
{q:"1. 當你遇到一個新的挑戰/任務時,你的第一
反應是:", options:["(A)馬上跳進去、先試看看","(B)先觀察環境、研究方式","(C)有點猶豫、怕搞砸","(D)先做部分準備
"]},
{q:"2. 在人際互動中,當朋友需要幫忙/情緒低落
時,你通常會:", options:["A. 鼓勵他們「快起來、一起去做點什麼」","B. 安靜陪伴、傾聽他們說什麼","C. 有點退縮、不太確定怎麼幫比較好","D. 主動提供支持、做好後勤或照顧他們"]},
{q:"3. 當你思考人生或尋找方向時，你偏好哪種方式:", options:["A. 設定目標、立刻動手實踐","B. 深入思考、寫筆記、分析可能性","C. 小心翼翼、怕錯、慢慢走","D.和他人分享、互相支持、一步一腳印"]},
{q:"4. 面對失敗或挫折,你最可能的反應是:", options:["A. 立即反彈、再戰一次","B. 自我反省、思考教訓","C. 感到沮喪、有點退縮、怕再犯錯","D. 尋求或提供人際支持、共同面對"]},
{q:"5. 如果要選擇你最看重的特質,是哪一項:", options:["A. 冒險精神/行動力","B. 思考深度/內在探索","C. 謹慎/安全感","D. 溫暖/支持他"]}
];

const personalityMap = {A:"馬型", B:"男孩", C:"狐狸", D:"鼴鼠"};
const personalityAnalysis = {
"馬型":"你習慣當那個「載大家走過去」的人。",
"男孩":"關於自己，你還在學著怎麼相信。",
"狐狸":"你看得很清楚，只是習慣把心收好。",
"鼴鼠":"你的溫柔，是世界很需要的安慰。"
};

let answers = [], current = 0;

// 顯示題目卡片
function showQuestion(index){
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = `<h3>${questions[index].q}</h3>`;
    questions[index].options.forEach(opt=>{
        const btn = document.createElement("button");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = ()=>{
            answers.push(opt[0]); // 取首字母 A/B/C/D
            nextQuestion();
        };
        quizDiv.appendChild(btn);
    });
}

function nextQuestion(){
    current++;
    if(current<questions.length) showQuestion(current);
    else showResult();
}

// 顯示結果卡片與雷達圖
function showResult(){
    document.getElementById("quiz").style.display="none";
    const resultDiv = document.getElementById("result");
    resultDiv.style.display="flex";

    const counts = {A:0,B:0,C:0,D:0};
    answers.forEach(a=>counts[a]++);

    let dominantLetter = Object.keys(counts).reduce((a,b)=>counts[a]>counts[b]?a:a);
    let maxCount = counts[dominantLetter];
    let numMax = Object.values(counts).filter(v=>v===maxCount).length;
    let dominantAnimal = (maxCount===1 && numMax===5)||numMax>1 ? "狐狸" : personalityMap[dominantLetter];

    document.getElementById("dominantAnimal").textContent = "主導性格: " + dominantAnimal;
    document.getElementById("dominantDesc").textContent = personalityAnalysis[dominantAnimal];

    const data = {
        labels: ["馬型","男孩","狐狸","鼴鼠"],
        datasets:[{
            label:'性格分數',
            data:[
                counts["A"]||0,
                counts["B"]||0,
                counts["C"]||0,
                counts["D"]||0,
                dominantAnimal==="狐狸"?1:0
            ],
            backgroundColor:'rgba(54,162,235,0.2)',
            borderColor:'rgba(54,162,235,1)',
            borderWidth:2
        }]
    };

    new Chart(document.getElementById("radarChart"),{
        type:'radar',
        data:data,
        options:{responsive:true, scales:{r:{beginAtZero:true, max:5}}}
    });
}

// 初始化
window.addEventListener('load', ()=>{
    showQuestion(current);
});
</script>
</body>
</html>
