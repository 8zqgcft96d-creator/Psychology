<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>心理測驗</title>
<style>
body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px;}
.card { background: #fff; padding: 20px; margin: 20px auto; width: 400px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);}
button { margin-top: 10px; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;}
.option { display: block; margin: 8px 0; padding: 8px; background: #e0e0e0; border-radius: 5px; cursor: pointer;}
.option:hover { background: #d0d0d0;}
#result { display: none; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);}
#downloadBtn { margin-top: 15px; }
</style>
</head>
<body>

<div id="quiz" class="card"></div>
<div id="result" class="card"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
// 題目設定與選項文字
const questions = [
{
  q: "1. 當你遇到一個新的挑戰/任務時,你的第一反應是:",
  options: [
    "A. 馬上跳進去、先試看看",
    "B. 先觀察環境、研究方式",
    "C. 有點猶豫、怕搞砸、先做部分準備",
    "D. 想幫助他人、在背後支撐或配合"
  ]
},
{
  q: "2. 在人際互動中,當朋友需要幫忙/情緒低落時,你通常會:",
  options: [
    "A. 鼓勵他們「快起來、一起去做點什麼」",
    "B. 安靜陪伴、傾聽他們說出來",
    "C. 有點退縮、不太確定怎麼幫比較好",
    "D. 主動提供支持、做好後勤或照顧他們"
  ]
},
{
  q: "3. 當你在思考人生或尋找方向時,你偏好哪種方式:",
  options: [
    "A. 設定目標、立刻動手實踐",
    "B. 深入思考、寫筆記、分析可能性",
    "C. 小心翼翼、怕錯、慢慢走",
    "D. 和他人分享、互相支持、一步一腳印"
  ]
},
{
  q: "4. 面對失敗或挫折,你最可能的反應是:",
  options: [
    "A. 立刻反彈、再戰一次",
    "B. 自我反省、思考教訓",
    "C. 感到沮喪、有點退縮、怕再犯錯",
    "D. 尋求或提供人際支持、共同面對"
  ]
},
{
  q: "5. 如果要選擇你最看重的特質,是哪一項:",
  options: [
    "A. 冒險精神/行動力",
    "B. 思考深度/内在探索",
    "C. 謹慎/安全感",
    "D. 溫暖/支持他"
  ]
}];

// 選項對應分析
const analysis = {
"A":"你偏向冒險、行動力強，喜歡立即行動解決問題。",
"B":"你偏向內在思考、觀察細膩，善於分析與傾聽。",
"C":"你偏向謹慎、追求安全感，行動前會仔細評估。",
"D":"你偏向溫暖、支持他人，重視人際關係與合作。"
};

let answers = [];
let current = 0;

function showQuestion(index){
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = `<h3>${questions[index].q}</h3>`;
    questions[index].options.forEach(opt=>{
        const btn = document.createElement("button");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = ()=>{ answers.push(opt[0]); nextQuestion(); }; // 用第一個字母 A/B/C/D
        quizDiv.appendChild(btn);
    });
}

function nextQuestion(){
    current++;
    if(current < questions.length){
        showQuestion(current);
    } else {
        showResult();
    }
}

function showResult(){
    document.getElementById("quiz").style.display="none";
    const resultDiv = document.getElementById("result");
    resultDiv.style.display="block";
    const counts = {A:0,B:0,C:0,D:0};
    answers.forEach(a=>counts[a]++);
    let dominant = Object.keys(counts).reduce((a,b)=>counts[a]>=counts[b]?a:b);
    let resultText = `<h3>測驗結果</h3>`;
    resultText += `<p>你的主要傾向是: ${dominant}</p>`;
    resultText += `<p>${analysis[dominant]}</p>`;
    resultText += `<button id="downloadBtn">下載結果圖片</button>`;
    resultDiv.innerHTML = resultText;

    document.getElementById("downloadBtn").onclick = function(){
        html2canvas(resultDiv).then(canvas=>{
            const link = document.createElement("a");
            link.download = "心理測驗結果.png";
            link.href = canvas.toDataURL();
            link.click();
        });
    };
}

// 初始化
showQuestion(current);
</script>
</body>
</html>
