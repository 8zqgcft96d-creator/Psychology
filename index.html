<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>心理測驗全螢幕卡片</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    font-family: Arial, sans-serif; background: #f0f0f0;
    overflow: hidden;
}
.card {
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    box-sizing: border-box;
    text-align: center;
    width: 100vw;
    height: 100vh;
    padding: 2vw;
    font-size: 5vw; /* 文字大小跟螢幕寬度 */
}
h3 {
    margin-bottom: 3vh;
}
button.option {
    display: block;
    margin: 1vh auto;
    padding: 2vh 0;
    width: 90%; /* 佔螢幕寬度 */
    font-size: 4vw; /* 按鈕文字跟螢幕比例 */
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #e0e0e0;
    transition: 0.2s;
}
button.option:hover { background: #d0d0d0; }
#result canvas { max-width: 90%; max-height: 40vh; margin-top: 3vh; }
#analysisText { margin-top: 2vh; font-size: 4vw; }
</style>
</head>
<body>

<div id="quiz" class="card"></div>
<div id="result" class="card" style="display:none;">
    <h3 id="dominantAnimal"></h3>
    <p id="dominantDesc"></p>
    <canvas id="radarChart"></canvas>
    <div id="analysisText"></div>
</div>

<script>
// 題目與選項
const questions = [
{q:"1. 當你遇到一個新的挑戰/任務時,你的第一
反應是:", options:["(A)馬上跳進去、先試看看","(B)先觀察環境、研究方式","(C)有點猶豫、怕搞砸","(D)先做部分準備
"]},
{q:"2. 在人際互動中,當朋友需要幫忙/情緒低落
時,你通常會:", options:["A. 鼓勵他們「快起來、一起去做點什麼」","B. 安靜陪伴、傾聽他們說什麼","C. 有點退縮、不太確定怎麼幫比較好","D. 主動提供支持、做好後勤或照顧他們"]},
{q:"3. 當你思考人生或尋找方向時，你偏好哪種方式:", options:["A. 設定目標、立刻動手實踐","B. 深入思考、寫筆記、分析可能性","C. 小心翼翼、怕錯、慢慢走","D.和他人分享、互相支持、一步一腳印"]},
{q:"4. 面對失敗或挫折,你最可能的反應是:", options:["A. 立即反彈、再戰一次","B. 自我反省、思考教訓","C. 感到沮喪、有點退縮、怕再犯錯","D. 尋求或提供人際支持、共同面對"]},
{q:"5. 如果要選擇你最看重的特質,是哪一項:", options:["A. 冒險精神/行動力","B. 思考深度/內在探索","C. 謹慎/安全感","D. 溫暖/支持他"]}
];

const personalityMap = {A:"馬型", B:"男孩", C:"狐狸", D:"鼴鼠"};
const personalityAnalysis = {
"馬型":"你習慣當那個「載大家走過去」的人。
你的樣子
你很習慣扛責任、撐住場面。很多時候,你自己其實也會累、也會徬徨,可是你會先問:「大家還好嗎?」你是那種會陪著別人走一段的人,願意當那匹穩穩向前的馬。你給人的感覺你讓人有安全感。只要你在,事情好像就能慢慢被處理好。很多人會在不知不覺中依賴你、把難題丟給你,因為你看起來總是知道該
怎麼做。

給你的提醒
你不是永遠都要那麼堅強。當你覺得很重的時
候,也可以停下來,把一些重量放回去,或者
請別人幫忙扛一點。有時候,真正的力量不是
一直往前衝,而是敢在需要的時候說:「我也想
被照顧。」
",
"男孩":"關於自己，你還在學著怎麼相信。
你的樣子
你有很強的感受力，對世界充滿好奇，也對自己充滿好奇，也對自己充滿問號。你常常會想：我到底夠不夠好？」「我能不能不能被喜歡、被理解？」這種敏感，讓你更容易看見別人的情緒，也更容易忽略自己的需要。

你給別人的感覺
在別人眼中，你像一個正在長大的孩子，真誠、直接、很真實。你會為了關係不斷自我檢討，只想讓自己變得更好。很多人因為你願意說出的脆弱，而覺得被陪伴。

給你的提醒
你不需要完美才值得被愛。試著多看看自己已經做得不錯的地方，允許「還在路上」的自己存在。當你願意對自己溫柔一點，你就會發現：原來你早就已經是某個人心裡，很重要的那個存在。

",
"狐狸":"你看得很清楚，只是習慣把心收好。
你的樣子
你敏銳、細心，對人的真心假意、情況的危險程度，有一種直覺式的判斷。你不會輕易把自己交出去，因為你知道受傷有多痛，所以寧可慢一點、在確定一點。

你給人的感覺
一開始，你可能讓人覺得有距離、有點冷，但真正走進你心裡的人都知道：你其實非常忠誠、非常有義奇。你不會亂承諾，一旦說出口，就會盡力做到。

給你的提醒
保持界線是好事，但也把自己關得太緊。不是每個人都會像過去那些人一樣傷害你。你可以試著多給世界一點點機會—-不是為了別人，而是為了讓自己有機會好好對待。
",
"鼴鼠":"你的溫柔，是世界很需要的安慰。
你的樣子
你很重視「舒服感」—食物、氣氛、陪伴、小確幸。你知道人不可能每天都很強，所以你特別會照顧情緒、照顧氣氛。你會為別人準備點心、傳訊息問候、講些好笑的話，讓沈重變得沒那麼可怕。

你給人的感覺
你像一個會做甜點的好朋友，可能不會給一大串理性分析，但總會讓人覺得：「跟你在一起就不那麼難過了吧。」很多人其實靠你的存在，才撐過了一些很黑暗的日子。

給你的提醒
在照顧別人之前，也別忘了一句：「那我自己呢？」你值得把同樣的溫柔，留一份給自己—。偶爾不用那麼逗趣、那麼體貼，也沒關係——就算今天只想躺著，你一樣是很可愛的你。
"
};

let answers = [], current = 0;

// 顯示題目卡片
function showQuestion(index){
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = `<h3>${questions[index].q}</h3>`;
    questions[index].options.forEach(opt=>{
        const btn = document.createElement("button");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = ()=>{
            answers.push(opt[0]); // 取首字母 A/B/C/D
            nextQuestion();
        };
        quizDiv.appendChild(btn);
    });
}

function nextQuestion(){
    current++;
    if(current<questions.length) showQuestion(current);
    else showResult();
}

// 顯示結果卡片與雷達圖
function showResult(){
    document.getElementById("quiz").style.display="none";
    const resultDiv = document.getElementById("result");
    resultDiv.style.display="flex";

    const counts = {A:0,B:0,C:0,D:0};
    answers.forEach(a=>counts[a]++);

    let dominantLetter = Object.keys(counts).reduce((a,b)=>counts[a]>counts[b]?a:a);
    let maxCount = counts[dominantLetter];
    let numMax = Object.values(counts).filter(v=>v===maxCount).length;
    let dominantAnimal = (maxCount===1 && numMax===5)||numMax>1 ? "狐狸" : personalityMap[dominantLetter];

    document.getElementById("dominantAnimal").textContent = "主導性格: " + dominantAnimal;
    document.getElementById("dominantDesc").textContent = personalityAnalysis[dominantAnimal];

    const data = {
        labels: ["馬型","男孩","狐狸","鼴鼠"],
        datasets:[{
            label:'性格分數',
            data:[
                counts["A"]||0,
                counts["B"]||0,
                counts["C"]||0,
                counts["D"]||0,
                dominantAnimal==="狐狸"?1:0
            ],
            backgroundColor:'rgba(54,162,235,0.2)',
            borderColor:'rgba(54,162,235,1)',
            borderWidth:2
        }]
    };

    new Chart(document.getElementById("radarChart"),{
        type:'radar',
        data:data,
        options:{responsive:true, scales:{r:{beginAtZero:true, max:5}}}
    });
}

// 初始化
window.addEventListener('load', ()=>{
    showQuestion(current);
});
</script>
</body>
</html>
